[
  {
    "Id": "830147",
    "ThreadId": "354011",
    "Html": "<p>I'm attempting to save an SVG file via a handler to a .png file. At the moment my code appears to give me a null reference exception when I try to call 'Draw()' on the SvgDocument, but the document appears correctly formed.</p>\n<p>My code at the moment looks like this (inside a handler):</p>\n<p>[code]var oDoc = Svg.SvgDocument.Open(new System.IO.MemoryStream(System.Text.ASCIIEncoding.Default.GetBytes(context.Request.Params[\"svg\"])));</p>\n<p>oDoc.Draw().Save(@\"c:\\temp\\somit.png\", ImageFormat.Png);[/code]</p>\n<p>My input svg seems sane, but the Draw method doesn't seem too happy. Any ideas on where to look with this one?</p>\n<p>The stack trace is below:</p>\n<p>Object reference not set to an instance of an object.&lt;br&gt;&lt;br&gt;   at Svg.SvgUnit.ToDeviceValue(ISvgStylable styleOwner, Boolean vertical)<br /> at Svg.SvgUnit.ToDeviceValue(ISvgStylable styleOwner)<br /> at Svg.SvgUnit.ToDeviceValue()<br /> at Svg.SvgRectangle.get_Path()<br /> at Svg.SvgGraphicsElement.Render(SvgRenderer renderer)<br /> at Svg.SvgRectangle.Render(SvgRenderer renderer)<br /> at Svg.SvgElement.RenderChildren(SvgRenderer renderer)<br /> at Svg.SvgElement.Render(SvgRenderer renderer)<br /> at Svg.SvgDocument.Draw()<br /> at SVGHandler.ProcessRequest(HttpContext context) in c:\\Applications\\Document\\SVGHandler.ashx:line 28<br /> at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()<br /> at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean&amp; completedSynchronously)</p>\n<p>My svg string, taken directly from 'context.Request.Params[\"svg\"]' is below:</p>\n<p>&lt;?xml version=\"1.0\" standalone=\"yes\"?&gt;&lt;!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"<a href=\"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\"&gt;&lt;svg</a> width=\"1184px\" height=\"365px\" xmlns=\"<a href=\"http://www.w3.org/2000/svg\">http://www.w3.org/2000/svg</a>\"  xmlns:xlink=\"<a href=\"http://www.w3.org/1999/xlink\">http://www.w3.org/1999/xlink</a>\" version=\"1.1\"&gt;&lt;defs&gt;&lt;/defs&gt;&lt;rect width=\"100%\" height=\"100%\" fill=\"#fff\" fill-opacity=\"0\" stroke=\"none\" /&gt;&lt;path d=\"M 176.5 293L 176.5 10M 170 293.5L 177 293.5M 170 252.5L  177 252.5M 170 212.5L 177 212.5M 170 171.5L 177 171.5M 170 131.5L 177 131.5M 170 90.5L 177 90.5M 170 50.5L 177 50.5M 170 10.5L 177 10.5\" fill=\"none\" stroke=\"#444\" stroke-width=\"1\" z-index=\"0\" transform=\"matrix(1,0,0,1,0,0)\" /&gt;&lt;text x=\"149\" y=\"293\" font-size=\"12\"  font-family=\"Arial\" fill=\"#000\" transform=\"matrix(1,0,0,1,0,0)\" &gt;&lt;tspan x=\"149\" dy=\"3\"&gt;0.0&lt;/tspan&gt;&lt;/text&gt;&lt;text x=\"142\" y=\"252\" font-size=\"12\" font-family=\"Arial\" fill=\"#000\" transform=\"matrix(1,0,0,1,0,0)\" &gt;&lt;tspan x=\"142\" dy=\"3\"&gt;20.0&lt;/tspan&gt;&lt;/text&gt;&lt;text x=\"142\"  y=\"212\" font-size=\"12\" font-family=\"Arial\" fill=\"#000\" transform=\"matrix(1,0,0,1,0,0)\" &gt;&lt;tspan x=\"142\" dy=\"3\"&gt;40.0&lt;/tspan&gt;&lt;/text&gt;&lt;text x=\"142\" y=\"171\" font-size=\"12\" font-family=\"Arial\" fill=\"#000\" transform=\"matrix(1,0,0,1,0,0)\" &gt;&lt;tspan x=\"142\" dy=\"3\"&gt;60.0&lt;/tspan&gt;&lt;/text&gt;&lt;text  x=\"142\" y=\"131\" font-size=\"12\" font-family=\"Arial\" fill=\"#000\" transform=\"matrix(1,0,0,1,0,0)\" &gt;&lt;tspan x=\"142\" dy=\"3\"&gt;80.0&lt;/tspan&gt;&lt;/text&gt;&lt;text x=\"135\" y=\"90\" font-size=\"12\" font-family=\"Arial\" fill=\"#000\" transform=\"matrix(1,0,0,1,0,0)\" &gt;&lt;tspan x=\"135\" dy=\"3\"&gt;100.0&lt;/tspan&gt;&lt;/text&gt;&lt;text  x=\"135\" y=\"50\" font-size=\"12\" font-family=\"Arial\" fill=\"#000\" transform=\"matrix(1,0,0,1,0,0)\" &gt;&lt;tspan x=\"135\" dy=\"3\"&gt;120.0&lt;/tspan&gt;&lt;/text&gt;&lt;text x=\"135\" y=\"9\" font-size=\"12\" font-family=\"Arial\" fill=\"#000\" transform=\"matrix(1,0,0,1,0,0)\" &gt;&lt;tspan x=\"135\" dy=\"3\"&gt;140.0&lt;/tspan&gt;&lt;/text&gt;&lt;text  x=\"0\" y=\"0\" font-size=\"22\" font-family=\"Arial\" fill=\"#222\" transform=\"matrix(0,-1,1,0,115.5,180.5)\" &gt;&lt;tspan x=\"\" dy=\"5.5\"&gt;Hours&lt;/tspan&gt;&lt;/text&gt;&lt;path d=\"M 176.5 252.5L 1172.5 252.5M 176.5 212.5L 1172.5 212.5M 176.5 171.5L 1172.5 171.5M 176.5 131.5L 1172.5 131.5M  176.5 90.5L 1172.5 90.5M 176.5 50.5L 1172.5 50.5\" fill=\"none\" stroke=\"#ccc\" stroke-width=\"1\" z-index=\"0\" transform=\"matrix(1,0,0,1,0,0)\" /&gt;&lt;rect x=\"187\" y=\"50\" width=\"89\" height=\"243\" fill=\"#104bd6\" fill-opacity=\"0.5\" stroke=\"black\" stroke-width=\"1\" transform=\"matrix(1,0,0,1,0,0)\"  /&gt;&lt;rect x=\"187\" y=\"50\" width=\"89\" height=\"0\" fill=\"#0edc32\" fill-opacity=\"0.5\" stroke=\"black\" stroke-width=\"1\" transform=\"matrix(1,0,0,1,0,0)\" /&gt;&lt;rect x=\"187\" y=\"30\" width=\"89\" height=\"20\" fill=\"#e60005\" fill-opacity=\"0.5\" stroke=\"black\" stroke-width=\"1\" transform=\"matrix(1,0,0,1,0,0)\"  /&gt;&lt;path d=\"M 176 293.5L 1174 293.5M 231.5 293L 231.5 300M 329.5 293L 329.5 300M 428.5 293L 428.5 300M 527.5 293L 527.5 300M 625.5 293L 625.5 300M 724.5 293L 724.5 300M 822.5 293L 822.5 300M 921.5 293L 921.5 300M 1020.5 293L 1020.5 300M 1118.5 293L 1118.5 300\"  fill=\"none\" stroke=\"#444\" stroke-width=\"1\" z-index=\"0\" transform=\"matrix(1,0,0,1,0,0)\" /&gt;&lt;text x=\"200\" y=\"312.5\" font-size=\"12\" font-family=\"Arial\" fill=\"#000\" transform=\"matrix(1,0,0,1,0,0)\" &gt;&lt;tspan x=\"200\" dy=\"3\"&gt;04/05/2012&lt;/tspan&gt;&lt;/text&gt;&lt;text x=\"298\" y=\"312.5\"  font-size=\"12\" font-family=\"Arial\" fill=\"#000\" transform=\"matrix(1,0,0,1,0,0)\" &gt;&lt;tspan x=\"298\" dy=\"3\"&gt;11/05/2012&lt;/tspan&gt;&lt;/text&gt;&lt;text x=\"397\" y=\"312.5\" font-size=\"12\" font-family=\"Arial\" fill=\"#000\" transform=\"matrix(1,0,0,1,0,0)\" &gt;&lt;tspan x=\"397\" dy=\"3\"&gt;18/05/2012&lt;/tspan&gt;&lt;/text&gt;&lt;text  x=\"496\" y=\"312.5\" font-size=\"12\" font-family=\"Arial\" fill=\"#000\" transform=\"matrix(1,0,0,1,0,0)\" &gt;&lt;tspan x=\"496\" dy=\"3\"&gt;25/05/2012&lt;/tspan&gt;&lt;/text&gt;&lt;text x=\"594\" y=\"312.5\" font-size=\"12\" font-family=\"Arial\" fill=\"#000\" transform=\"matrix(1,0,0,1,0,0)\" &gt;&lt;tspan  x=\"594\" dy=\"3\"&gt;01/06/2012&lt;/tspan&gt;&lt;/text&gt;&lt;text x=\"693\" y=\"312.5\" font-size=\"12\" font-family=\"Arial\" fill=\"#000\" transform=\"matrix(1,0,0,1,0,0)\" &gt;&lt;tspan x=\"693\" dy=\"3\"&gt;08/06/2012&lt;/tspan&gt;&lt;/text&gt;&lt;text x=\"791\" y=\"312.5\" font-size=\"12\" font-family=\"Arial\" fill=\"#000\"  transform=\"matrix(1,0,0,1,0,0)\" &gt;&lt;tspan x=\"791\" dy=\"3\"&gt;15/06/2012&lt;/tspan&gt;&lt;/text&gt;&lt;text x=\"890\" y=\"312.5\" font-size=\"12\" font-family=\"Arial\" fill=\"#000\" transform=\"matrix(1,0,0,1,0,0)\" &gt;&lt;tspan x=\"890\" dy=\"3\"&gt;22/06/2012&lt;/tspan&gt;&lt;/text&gt;&lt;text x=\"989\" y=\"312.5\" font-size=\"12\"  font-family=\"Arial\" fill=\"#000\" transform=\"matrix(1,0,0,1,0,0)\" &gt;&lt;tspan x=\"989\" dy=\"3\"&gt;29/06/2012&lt;/tspan&gt;&lt;/text&gt;&lt;text x=\"1087\" y=\"312.5\" font-size=\"12\" font-family=\"Arial\" fill=\"#000\" transform=\"matrix(1,0,0,1,0,0)\" &gt;&lt;tspan x=\"1087\" dy=\"3\"&gt;06/07/2012&lt;/tspan&gt;&lt;/text&gt;&lt;text  x=\"0\" y=\"0\" font-size=\"22\" font-family=\"Arial\" fill=\"#222\" transform=\"matrix(1,0,0,1,611.5,347.6)\" &gt;&lt;tspan x=\"\" dy=\"5.5\"&gt;Week Ending&lt;/tspan&gt;&lt;/text&gt;&lt;path d=\"M 231.5 292.5L 231.5 11.5M 329.5 292.5L 329.5 11.5M 428.5 292.5L 428.5 11.5M 527.5 292.5L 527.5 11.5M  625.5 292.5L 625.5 11.5M 724.5 292.5L 724.5 11.5M 822.5 292.5L 822.5 11.5M 921.5 292.5L 921.5 11.5M 1020.5 292.5L 1020.5 11.5M 1118.5 292.5L 1118.5 11.5\" fill=\"none\" stroke=\"#ccc\" stroke-width=\"1\" z-index=\"0\" transform=\"matrix(1,0,0,1,0,0)\" /&gt;&lt;rect x=\"285\"  y=\"172\" width=\"89\" height=\"121\" fill=\"#104bd6\" fill-opacity=\"0.5\" stroke=\"black\" stroke-width=\"1\" transform=\"matrix(1,0,0,1,0,0)\" /&gt;&lt;rect x=\"285\" y=\"172\" width=\"89\" height=\"0\" fill=\"#0edc32\" fill-opacity=\"0.5\" stroke=\"black\" stroke-width=\"1\" transform=\"matrix(1,0,0,1,0,0)\"  /&gt;&lt;rect x=\"285\" y=\"156\" width=\"89\" height=\"16\" fill=\"#e60005\" fill-opacity=\"0.5\" stroke=\"black\" stroke-width=\"1\" transform=\"matrix(1,0,0,1,0,0)\" /&gt;&lt;rect x=\"384\" y=\"142\" width=\"89\" height=\"151\" fill=\"#104bd6\" fill-opacity=\"0.5\" stroke=\"black\" stroke-width=\"1\"  transform=\"matrix(1,0,0,1,0,0)\" /&gt;&lt;rect x=\"384\" y=\"142\" width=\"89\" height=\"0\" fill=\"#0edc32\" fill-opacity=\"0.5\" stroke=\"black\" stroke-width=\"1\" transform=\"matrix(1,0,0,1,0,0)\" /&gt;&lt;rect x=\"384\" y=\"122\" width=\"89\" height=\"20\" fill=\"#e60005\" fill-opacity=\"0.5\"  stroke=\"black\" stroke-width=\"1\" transform=\"matrix(1,0,0,1,0,0)\" /&gt;&lt;rect x=\"483\" y=\"114\" width=\"89\" height=\"179\" fill=\"#104bd6\" fill-opacity=\"0.5\" stroke=\"black\" stroke-width=\"1\" transform=\"matrix(1,0,0,1,0,0)\" /&gt;&lt;rect x=\"483\" y=\"114\" width=\"89\" height=\"0\"  fill=\"#0edc32\" fill-opacity=\"0.5\" stroke=\"black\" stroke-width=\"1\" transform=\"matrix(1,0,0,1,0,0)\" /&gt;&lt;rect x=\"483\" y=\"94\" width=\"89\" height=\"20\" fill=\"#e60005\" fill-opacity=\"0.5\" stroke=\"black\" stroke-width=\"1\" transform=\"matrix(1,0,0,1,0,0)\" /&gt;&lt;rect x=\"581\"  y=\"77\" width=\"89\" height=\"216\" fill=\"#104bd6\" fill-opacity=\"0.5\" stroke=\"black\" stroke-width=\"1\" transform=\"matrix(1,0,0,1,0,0)\" /&gt;&lt;rect x=\"581\" y=\"77\" width=\"89\" height=\"0\" fill=\"#0edc32\" fill-opacity=\"0.5\" stroke=\"black\" stroke-width=\"1\" transform=\"matrix(1,0,0,1,0,0)\"  /&gt;&lt;rect x=\"581\" y=\"61\" width=\"89\" height=\"16\" fill=\"#e60005\" fill-opacity=\"0.5\" stroke=\"black\" stroke-width=\"1\" transform=\"matrix(1,0,0,1,0,0)\" /&gt;&lt;rect x=\"680\" y=\"159\" width=\"89\" height=\"134\" fill=\"#104bd6\" fill-opacity=\"0.5\" stroke=\"black\" stroke-width=\"1\"  transform=\"matrix(1,0,0,1,0,0)\" /&gt;&lt;rect x=\"680\" y=\"159\" width=\"89\" height=\"0\" fill=\"#0edc32\" fill-opacity=\"0.5\" stroke=\"black\" stroke-width=\"1\" transform=\"matrix(1,0,0,1,0,0)\" /&gt;&lt;rect x=\"680\" y=\"139\" width=\"89\" height=\"20\" fill=\"#e60005\" fill-opacity=\"0.5\"  stroke=\"black\" stroke-width=\"1\" transform=\"matrix(1,0,0,1,0,0)\" /&gt;&lt;rect x=\"779\" y=\"81\" width=\"89\" height=\"212\" fill=\"#104bd6\" fill-opacity=\"0.5\" stroke=\"black\" stroke-width=\"1\" transform=\"matrix(1,0,0,1,0,0)\" /&gt;&lt;rect x=\"779\" y=\"81\" width=\"89\" height=\"0\" fill=\"#0edc32\"  fill-opacity=\"0.5\" stroke=\"black\" stroke-width=\"1\" transform=\"matrix(1,0,0,1,0,0)\" /&gt;&lt;rect x=\"779\" y=\"12\" width=\"89\" height=\"69\" fill=\"#e60005\" fill-opacity=\"0.5\" stroke=\"black\" stroke-width=\"1\" transform=\"matrix(1,0,0,1,0,0)\" /&gt;&lt;rect x=\"877\" y=\"146\" width=\"89\"  height=\"147\" fill=\"#104bd6\" fill-opacity=\"0.5\" stroke=\"black\" stroke-width=\"1\" transform=\"matrix(1,0,0,1,0,0)\" /&gt;&lt;rect x=\"877\" y=\"146\" width=\"89\" height=\"0\" fill=\"#0edc32\" fill-opacity=\"0.5\" stroke=\"black\" stroke-width=\"1\" transform=\"matrix(1,0,0,1,0,0)\" /&gt;&lt;rect  x=\"877\" y=\"77\" width=\"89\" height=\"69\" fill=\"#e60005\" fill-opacity=\"0.5\" stroke=\"black\" stroke-width=\"1\" transform=\"matrix(1,0,0,1,0,0)\" /&gt;&lt;rect x=\"976\" y=\"146\" width=\"89\" height=\"147\" fill=\"#104bd6\" fill-opacity=\"0.5\" stroke=\"black\" stroke-width=\"1\" transform=\"matrix(1,0,0,1,0,0)\"  /&gt;&lt;rect x=\"976\" y=\"146\" width=\"89\" height=\"0\" fill=\"#0edc32\" fill-opacity=\"0.5\" stroke=\"black\" stroke-width=\"1\" transform=\"matrix(1,0,0,1,0,0)\" /&gt;&lt;rect x=\"976\" y=\"77\" width=\"89\" height=\"69\" fill=\"#e60005\" fill-opacity=\"0.5\" stroke=\"black\" stroke-width=\"1\"  transform=\"matrix(1,0,0,1,0,0)\" /&gt;&lt;rect x=\"1075\" y=\"116\" width=\"89\" height=\"177\" fill=\"#104bd6\" fill-opacity=\"0.5\" stroke=\"black\" stroke-width=\"1\" transform=\"matrix(1,0,0,1,0,0)\" /&gt;&lt;rect x=\"1075\" y=\"116\" width=\"89\" height=\"0\" fill=\"#0edc32\" fill-opacity=\"0.5\"  stroke=\"black\" stroke-width=\"1\" transform=\"matrix(1,0,0,1,0,0)\" /&gt;&lt;rect x=\"1075\" y=\"47\" width=\"89\" height=\"69\" fill=\"#e60005\" fill-opacity=\"0.5\" stroke=\"black\" stroke-width=\"1\" transform=\"matrix(1,0,0,1,0,0)\" /&gt;&lt;rect x=\"9.5\" y=\"103.5\" width=\"80\" height=\"95\"  fill=\"#FFF\" stroke=\"#000\" stroke-width=\"1\" transform=\"matrix(1,0,0,1,0,0)\" /&gt;&lt;rect x=\"0\" y=\"-8.5\" width=\"62\" height=\"20.5\" fill=\"#FFF\" transform=\"matrix(1,0,0,1,15,114)\" /&gt;&lt;rect x=\"0\" y=\"-8.5\" width=\"70\" height=\"20.5\" fill=\"#FFF\" transform=\"matrix(1,0,0,1,15,142)\"  /&gt;&lt;rect x=\"0\" y=\"-8.5\" width=\"69.5\" height=\"20.5\" fill=\"#FFF\" transform=\"matrix(1,0,0,1,15,170)\" /&gt;&lt;text x=\"35\" y=\"120\" font-size=\"12\" font-family=\"Helvetica, sans-serif\" fill=\"#000\" transform=\"matrix(1,0,0,1,0,0)\" &gt;&lt;tspan x=\"35\" dy=\"3\"&gt;Definite&lt;/tspan&gt;&lt;/text&gt;&lt;rect  x=\"0\" y=\"0\" width=\"12\" height=\"12\" fill=\"#104bd6\" transform=\"matrix(1,0,0,1,15,114)\" /&gt;&lt;text x=\"35\" y=\"148\" font-size=\"12\" font-family=\"Helvetica, sans-serif\" fill=\"#000\" transform=\"matrix(1,0,0,1,0,0)\" &gt;&lt;tspan x=\"35\" dy=\"3\"&gt;Probable&lt;/tspan&gt;&lt;/text&gt;&lt;rect x=\"0\"  y=\"0\" width=\"12\" height=\"12\" fill=\"#0edc32\" transform=\"matrix(1,0,0,1,15,142)\" /&gt;&lt;text x=\"35\" y=\"176\" font-size=\"12\" font-family=\"Helvetica, sans-serif\" fill=\"#000\" transform=\"matrix(1,0,0,1,0,0)\" &gt;&lt;tspan x=\"35\" dy=\"3\"&gt;Prospect&lt;/tspan&gt;&lt;/text&gt;&lt;rect x=\"0\" y=\"0\"  width=\"12\" height=\"12\" fill=\"#e60005\" transform=\"matrix(1,0,0,1,15,170)\" /&gt;&lt;/svg&gt;</p>",
    "PostedDate": "2012-04-30T05:30:21.383-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "830501",
    "ThreadId": "354011",
    "Html": "<p>Hey dougajmcdonald,</p>\r\n<p>I'll look into this when I'm back at my machine, but by looking at the issue I wonder if the width and height being set to 100% might be the issue. I'm not suggesting this is invalid SVG but I don't recall if this is supported.</p>\r\n<p>You may want to try and set the width and height to pixel values on the root &lt;rect/&gt; to see if this resolves the issue (as a temp option).</p>\r\n<p>Scriv</p>\r\n<p>&nbsp;</p>",
    "PostedDate": "2012-04-30T23:22:22.817-07:00",
    "UserRole": "Owner",
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "830517",
    "ThreadId": "354011",
    "Html": "<p>Hi Scriv,</p>\r\n<p>In an effort to sort this one I grabbed the latest version of the source, rather than the 0.5.2 download in the downloads section and I'm no longer getting this issue.</p>\r\n<p>I am now however getting a different issue, in that the image is produced happily without any of the text. Is there anything wrong with how the text elements are formed in the SVG as far as you can see?</p>\r\n<p>The rest of the image is absolutely fine, I've updated my code to fire the image as an attachment, in case this would make any difference. Here is my ProcessRequest() method in my handler:</p>\r\n<div style=\"color: black; background-color: white;\">\r\n<pre>    <span style=\"color: blue;\">public</span> <span style=\"color: blue;\">void</span> ProcessRequest (HttpContext context) {\r\n\r\n        <span style=\"color: blue;\">var</span> opDoc = Svg.SvgDocument.Open(<span style=\"color: blue;\">new</span> System.IO.MemoryStream(System.Text.ASCIIEncoding.Default.GetBytes(context.Request.Params[<span style=\"color: #a31515;\">\"svg\"</span>])));\r\n        \r\n        <span style=\"color: blue;\">byte</span>[] opData = <span style=\"color: blue;\">null</span>;\r\n\r\n        <span style=\"color: blue;\">using</span> (MemoryStream opMemStream = <span style=\"color: blue;\">new</span> MemoryStream())\r\n        {\r\n            opDoc.Draw().Save(opMemStream, ImageFormat.Png);\r\n\r\n            opData = opMemStream.ToArray();\r\n        }\r\n\r\n        context.Response.Clear();\r\n\r\n        context.Response.AppendHeader(<span style=\"color: #a31515;\">\"Content-disposition\"</span>, <span style=\"color: #a31515;\">\"attachment; filename=ChartDownload.png\"</span>);              \r\n        \r\n        context.Response.OutputStream.Write(opData, 0, opData.Length);                \r\n\r\n        context.Response.Flush();\r\n\r\n        context.Response.End();            \r\n            \r\n    }\r\n</pre>\r\n</div>",
    "PostedDate": "2012-05-01T00:26:34.09-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "835077",
    "ThreadId": "354011",
    "Html": "<p>Ok, I did some more digging on this one and curtosy of a colleague we've worked out that the &lt;tspan&gt; tags are what's causing the issue here.</p>\r\n<p>For the time being, we've adjusted our generation code to remove those tags, but it would be great if the renderer could cope with those.</p>\r\n<p>If we amend the code to handle it (not sure we'll have time right now), I'll post the updated code back here,</p>\r\n<p>Cheers,</p>\r\n<p>Doug</p>",
    "PostedDate": "2012-05-11T05:12:54.447-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "835375",
    "ThreadId": "354011",
    "Html": "<p>Hi Doug,</p>\r\n<p>I think the reason why tspan does not work is that text element does not render its children. I add below in SvgText.cs to do this:</p>\r\n<p>\r\n<div style=\"color: black; background-color: white;\">\r\n<pre>        <span style=\"color: blue;\">protected</span> <span style=\"color: blue;\">override</span> <span style=\"color: blue;\">void</span> Render(SvgRenderer renderer)\r\n        {\r\n            <span style=\"color: blue;\">this</span>.PushTransforms(renderer);\r\n            <span style=\"color: blue;\">this</span>.SetClip(renderer);\r\n            <span style=\"color: blue;\">if</span> (<span style=\"color: blue;\">this</span>.Children.Count != 0) <span style=\"color: blue;\">base</span>.RenderChildren(renderer); <span style=\"color: blue;\">else</span> <span style=\"color: blue;\">base</span>.Render(renderer);\r\n            <span style=\"color: blue;\">this</span>.ResetClip(renderer);\r\n            <span style=\"color: blue;\">this</span>.PopTransforms(renderer);\r\n        }\r\n</pre>\r\n</div>\r\n</p>\r\n<p>Besides, I found the properties dx and dy &nbsp;for tspan were not defined, need to add them and change X/Y properties in SvgTextSpan.cs as below:</p>\r\n<p>\r\n<pre>        [Browsable(false), DesignerSerializationVisibility(DesignerSerializationVisibility.Hidden)]\r\n        public override SvgUnit X\r\n        {\r\n            get { return ((base.X.Type == SvgUnitType.None) ? new SvgUnit(ParentNode.X.Type, ParentNode.X.Value + DX.Value) : new SvgUnit(base.X.Type, base.X.Value + DX.Value)); }\r\n            set { base.X = value; }\r\n        }\r\n\r\n        [Browsable(false), DesignerSerializationVisibility(DesignerSerializationVisibility.Hidden)]\r\n        public override SvgUnit Y\r\n        {\r\n            get { return ((base.Y.Type == SvgUnitType.None) ? new SvgUnit(ParentNode.Y.Type, ParentNode.Y.Value + DY.Value) : new SvgUnit(base.Y.Type, base.Y.Value + DY.Value)); }\r\n            set { base.Y = value; }\r\n        }\r\n\r\n        public SvgUnit DX { get; set; }\r\n        public SvgUnit DY { get; set; }</pre>\r\n<pre>&nbsp; &nbsp; &nbsp; &nbsp; private SvgText ParentNode&nbsp;{&nbsp;get { return (SvgText) Parent; }&nbsp;}<br /></pre>\r\n</p>\r\n<p>I tried the the example you attached above. It seems to work well. You may try to see if it is what you want.</p>\r\n<p>Vincent</p>",
    "PostedDate": "2012-05-11T18:54:15.763-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "835725",
    "ThreadId": "354011",
    "Html": "<p>Hi Vincent,</p>\r\n<p>Thanks very much for the render override and property definition examples. I've implimented them into my local version (based on 63210) but I seem to hit a null reference exception when calling 'Save()' within 'Draw()' inside SvgDocument.</p>\r\n<pre>Object reference not set to an instance of an object.<br /><br />   at System.Drawing.Graphics.set_Transform(Matrix value)\r\n   at Svg.SvgRenderer.set_Transform(Matrix value) in C:\\Applications\\SVGRenderer\\Source\\SvgRenderer.cs:line 123\r\n   at Svg.SvgElement.PopTransforms(SvgRenderer renderer) in C:\\Applications\\SVGRenderer\\Source\\SvgElement.cs:line 170\r\n   at Svg.SvgText.Render(SvgRenderer renderer) in C:\\Applications\\SVGRenderer\\Source\\Text\\SvgText.cs:line 291\r\n   at Svg.SvgElement.RenderChildren(SvgRenderer renderer) in C:\\Applications\\SVGRenderer\\Source\\SvgElement.cs:line 372\r\n   at Svg.SvgText.Render(SvgRenderer renderer) in C:\\Applications\\SVGRenderer\\Source\\Text\\SvgText.cs:line 289\r\n   at Svg.SvgElement.RenderChildren(SvgRenderer renderer) in C:\\Applications\\SVGRenderer\\Source\\SvgElement.cs:line 372\r\n   at Svg.SvgElement.Render(SvgRenderer renderer) in C:\\Applications\\SVGRenderer\\Source\\SvgElement.cs:line 360\r\n   at Svg.SvgDocument.Draw() in C:\\Applications\\SVGRenderer\\Source\\SvgDocument.cs:line 342\r\n   at SVGHandler.ProcessRequest(HttpContext context) in c:\\Applications\\Document\\SVGHandler.ashx:line 28\r\n   at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()\r\n   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean&amp; completedSynchronously)</pre>\r\n<p>&nbsp;</p>\r\n<p>I had a go inserting some null checks in the PopTransforms functions and in the X/Y override property and I can get past the null reference exception by altering the 'DX.Value' to (if(DX == null ? 0.0F : DX.Value)) but then I drop the majority of the chart in the output!</p>\r\n<p>Were there any other changes you made to get things working your end?</p>\r\n<p>Cheers,</p>\r\n<p>Doug</p>",
    "PostedDate": "2012-05-13T06:31:06.993-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "837113",
    "ThreadId": "354011",
    "Html": "<p>Hi Doug,</p>\r\n<p>Lots of bug fixed but&nbsp;not yet&nbsp;in the released version. I am not sure what the problem you&nbsp;encountered. One possible&nbsp;cause could be that in push/pop transform functions, the original version did not really use a stack to keep the&nbsp;matrix graphics.&nbsp;That could cause null reference&nbsp;for nested push/pop when it&nbsp;is set to&nbsp;null after pop.&nbsp;I changed it&nbsp;in Svgelement.cs:</p>\r\n<pre>        //private Matrix _graphicsMatrix;\r\n        private Stack _graphicsMatrixStack = new Stack(); // 1.02\r\n\r\n//-----\r\nprotected internal virtual void PushTransforms(SvgRenderer renderer)\r\n        {\r\n            //_graphicsMatrix = renderer.Transform;\r\n            _graphicsMatrixStack.Push(renderer.Transform); // 1.02\r\n\r\n//------\r\nprotected internal virtual void PopTransforms(SvgRenderer renderer)\r\n        {\r\n            //renderer.Transform = _graphicsMatrix;\r\n            renderer.Transform = _graphicsMatrixStack.Pop(); // 1.02\r\n            //_graphicsMatrix = null;\r\n        }</pre>\r\n<p>&nbsp;</p>\r\n<p>You may try it. I had also uploaded my complete&nbsp;local version (patch ID: 12212, with a viewer included). Try it if you like. (Note:&nbsp;this version is not an official released one, only for my own purpose, for your reference only, no garantee...)&nbsp;</p>\r\n<p>Vincent</p>\r\n<p>&nbsp;</p>",
    "PostedDate": "2012-05-16T03:20:47.7-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "910265",
    "ThreadId": "354011",
    "Html": "<p>Hi Doug or Vincent,</p>\r\n<p>Were you ever able to get this working? &nbsp;I ran into the same series of errors. &nbsp;The recommended code changes at the end didn't resolve for me the issue of the exported chart having no text.</p>\r\n<p>Thanks,</p>\r\n<p>Jaime</p>",
    "PostedDate": "2012-09-09T20:19:27.83-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]