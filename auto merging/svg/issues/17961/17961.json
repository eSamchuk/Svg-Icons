{
  "WorkItem": {
    "AffectedComponent": {
      "Name": "",
      "DisplayName": ""
    },
    "ClosedComment": "",
    "ClosedDate": null,
    "CommentCount": 0,
    "Custom": null,
    "Description": "I'm attempting to save an SVG file via a handler to a .png file. At the moment my code appears to give me a null reference exception when I try to call 'Draw()' on the SvgDocument, but the document appears correctly formed.\n \nMy code at the moment looks like this (inside a handler):\n \n[code]var oDoc = Svg.SvgDocument.Open(new System.IO.MemoryStream(System.Text.ASCIIEncoding.Default.GetBytes(context.Request.Params[\"svg\"])));\n \noDoc.Draw().Save(@\"c:\\temp\\somit.png\", ImageFormat.Png);[/code]\n \nMy input svg seems sane, but the Draw method doesn't seem too happy. Any ideas on where to look with this one?\n \nThe stack trace is below:\n \nObject reference not set to an instance of an object.<br><br> at Svg.SvgUnit.ToDeviceValue(ISvgStylable styleOwner, Boolean vertical)\n at Svg.SvgUnit.ToDeviceValue(ISvgStylable styleOwner)\n at Svg.SvgUnit.ToDeviceValue()\n at Svg.SvgRectangle.get_Path()\n at Svg.SvgGraphicsElement.Render(SvgRenderer renderer)\n at Svg.SvgRectangle.Render(SvgRenderer renderer)\n at Svg.SvgElement.RenderChildren(SvgRenderer renderer)\n at Svg.SvgElement.Render(SvgRenderer renderer)\n at Svg.SvgDocument.Draw()\n at SVGHandler.ProcessRequest(HttpContext context) in c:\\Applications\\Document\\SVGHandler.ashx:line 28\n at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()\n at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)\n \nMy svg string, taken directly from 'context.Request.Params[\"svg\"]' is below:\n \n<?xml version=\"1.0\" standalone=\"yes\"?><!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\"><svg width=\"1184px\" height=\"365px\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\"><defs></defs><rect width=\"100%\" height=\"100%\" fill=\"#fff\" fill-opacity=\"0\" stroke=\"none\" /><path d=\"M 176.5 293L 176.5 10M 170 293.5L 177 293.5M 170 252.5L 177 252.5M 170 212.5L 177 212.5M 170 171.5L 177 171.5M 170 131.5L 177 131.5M 170 90.5L 177 90.5M 170 50.5L 177 50.5M 170 10.5L 177 10.5\" fill=\"none\" stroke=\"#444\" stroke-width=\"1\" z-index=\"0\" transform=\"matrix(1,0,0,1,0,0)\" /><text x=\"149\" y=\"293\" font-size=\"12\" font-family=\"Arial\" fill=\"#000\" transform=\"matrix(1,0,0,1,0,0)\" ><tspan x=\"149\" dy=\"3\">0.0</tspan></text><text x=\"142\" y=\"252\" font-size=\"12\" font-family=\"Arial\" fill=\"#000\" transform=\"matrix(1,0,0,1,0,0)\" ><tspan x=\"142\" dy=\"3\">20.0</tspan></text><text x=\"142\" y=\"212\" font-size=\"12\" font-family=\"Arial\" fill=\"#000\" transform=\"matrix(1,0,0,1,0,0)\" ><tspan x=\"142\" dy=\"3\">40.0</tspan></text><text x=\"142\" y=\"171\" font-size=\"12\" font-family=\"Arial\" fill=\"#000\" transform=\"matrix(1,0,0,1,0,0)\" ><tspan x=\"142\" dy=\"3\">60.0</tspan></text><text x=\"142\" y=\"131\" font-size=\"12\" font-family=\"Arial\" fill=\"#000\" transform=\"matrix(1,0,0,1,0,0)\" ><tspan x=\"142\" dy=\"3\">80.0</tspan></text><text x=\"135\" y=\"90\" font-size=\"12\" font-family=\"Arial\" fill=\"#000\" transform=\"matrix(1,0,0,1,0,0)\" ><tspan x=\"135\" dy=\"3\">100.0</tspan></text><text x=\"135\" y=\"50\" font-size=\"12\" font-family=\"Arial\" fill=\"#000\" transform=\"matrix(1,0,0,1,0,0)\" ><tspan x=\"135\" dy=\"3\">120.0</tspan></text><text x=\"135\" y=\"9\" font-size=\"12\" font-family=\"Arial\" fill=\"#000\" transform=\"matrix(1,0,0,1,0,0)\" ><tspan x=\"135\" dy=\"3\">140.0</tspan></text><text x=\"0\" y=\"0\" font-size=\"22\" font-family=\"Arial\" fill=\"#222\" transform=\"matrix(0,-1,1,0,115.5,180.5)\" ><tspan x=\"\" dy=\"5.5\">Hours</tspan></text><path d=\"M 176.5 252.5L 1172.5 252.5M 176.5 212.5L 1172.5 212.5M 176.5 171.5L 1172.5 171.5M 176.5 131.5L 1172.5 131.5M 176.5 90.5L 1172.5 90.5M 176.5 50.5L 1172.5 50.5\" fill=\"none\" stroke=\"#ccc\" stroke-width=\"1\" z-index=\"0\" transform=\"matrix(1,0,0,1,0,0)\" /><rect x=\"187\" y=\"50\" width=\"89\" height=\"243\" fill=\"#104bd6\" fill-opacity=\"0.5\" stroke=\"black\" stroke-width=\"1\" transform=\"matrix(1,0,0,1,0,0)\" /><rect x=\"187\" y=\"50\" width=\"89\" height=\"0\" fill=\"#0edc32\" fill-opacity=\"0.5\" stroke=\"black\" stroke-width=\"1\" transform=\"matrix(1,0,0,1,0,0)\" /><rect x=\"187\" y=\"30\" width=\"89\" height=\"20\" fill=\"#e60005\" fill-opacity=\"0.5\" stroke=\"black\" stroke-width=\"1\" transform=\"matrix(1,0,0,1,0,0)\" /><path d=\"M 176 293.5L 1174 293.5M 231.5 293L 231.5 300M 329.5 293L 329.5 300M 428.5 293L 428.5 300M 527.5 293L 527.5 300M 625.5 293L 625.5 300M 724.5 293L 724.5 300M 822.5 293L 822.5 300M 921.5 293L 921.5 300M 1020.5 293L 1020.5 300M 1118.5 293L 1118.5 300\" fill=\"none\" stroke=\"#444\" stroke-width=\"1\" z-index=\"0\" transform=\"matrix(1,0,0,1,0,0)\" /><text x=\"200\" y=\"312.5\" font-size=\"12\" font-family=\"Arial\" fill=\"#000\" transform=\"matrix(1,0,0,1,0,0)\" ><tspan x=\"200\" dy=\"3\">04/05/2012</tspan></text><text x=\"298\" y=\"312.5\" font-size=\"12\" font-family=\"Arial\" fill=\"#000\" transform=\"matrix(1,0,0,1,0,0)\" ><tspan x=\"298\" dy=\"3\">11/05/2012</tspan></text><text x=\"397\" y=\"312.5\" font-size=\"12\" font-family=\"Arial\" fill=\"#000\" transform=\"matrix(1,0,0,1,0,0)\" ><tspan x=\"397\" dy=\"3\">18/05/2012</tspan></text><text x=\"496\" y=\"312.5\" font-size=\"12\" font-family=\"Arial\" fill=\"#000\" transform=\"matrix(1,0,0,1,0,0)\" ><tspan x=\"496\" dy=\"3\">25/05/2012</tspan></text><text x=\"594\" y=\"312.5\" font-size=\"12\" font-family=\"Arial\" fill=\"#000\" transform=\"matrix(1,0,0,1,0,0)\" ><tspan x=\"594\" dy=\"3\">01/06/2012</tspan></text><text x=\"693\" y=\"312.5\" font-size=\"12\" font-family=\"Arial\" fill=\"#000\" transform=\"matrix(1,0,0,1,0,0)\" ><tspan x=\"693\" dy=\"3\">08/06/2012</tspan></text><text x=\"791\" y=\"312.5\" font-size=\"12\" font-family=\"Arial\" fill=\"#000\" transform=\"matrix(1,0,0,1,0,0)\" ><tspan x=\"791\" dy=\"3\">15/06/2012</tspan></text><text x=\"890\" y=\"312.5\" font-size=\"12\" font-family=\"Arial\" fill=\"#000\" transform=\"matrix(1,0,0,1,0,0)\" ><tspan x=\"890\" dy=\"3\">22/06/2012</tspan></text><text x=\"989\" y=\"312.5\" font-size=\"12\" font-family=\"Arial\" fill=\"#000\" transform=\"matrix(1,0,0,1,0,0)\" ><tspan x=\"989\" dy=\"3\">29/06/2012</tspan></text><text x=\"1087\" y=\"312.5\" font-size=\"12\" font-family=\"Arial\" fill=\"#000\" transform=\"matrix(1,0,0,1,0,0)\" ><tspan x=\"1087\" dy=\"3\">06/07/2012</tspan></text><text x=\"0\" y=\"0\" font-size=\"22\" font-family=\"Arial\" fill=\"#222\" transform=\"matrix(1,0,0,1,611.5,347.6)\" ><tspan x=\"\" dy=\"5.5\">Week Ending</tspan></text><path d=\"M 231.5 292.5L 231.5 11.5M 329.5 292.5L 329.5 11.5M 428.5 292.5L 428.5 11.5M 527.5 292.5L 527.5 11.5M 625.5 292.5L 625.5 11.5M 724.5 292.5L 724.5 11.5M 822.5 292.5L 822.5 11.5M 921.5 292.5L 921.5 11.5M 1020.5 292.5L 1020.5 11.5M 1118.5 292.5L 1118.5 11.5\" fill=\"none\" stroke=\"#ccc\" stroke-width=\"1\" z-index=\"0\" transform=\"matrix(1,0,0,1,0,0)\" /><rect x=\"285\" y=\"172\" width=\"89\" height=\"121\" fill=\"#104bd6\" fill-opacity=\"0.5\" stroke=\"black\" stroke-width=\"1\" transform=\"matrix(1,0,0,1,0,0)\" /><rect x=\"285\" y=\"172\" width=\"89\" height=\"0\" fill=\"#0edc32\" fill-opacity=\"0.5\" stroke=\"black\" stroke-width=\"1\" transform=\"matrix(1,0,0,1,0,0)\" /><rect x=\"285\" y=\"156\" width=\"89\" height=\"16\" fill=\"#e60005\" fill-opacity=\"0.5\" stroke=\"black\" stroke-width=\"1\" transform=\"matrix(1,0,0,1,0,0)\" /><rect x=\"384\" y=\"142\" width=\"89\" height=\"151\" fill=\"#104bd6\" fill-opacity=\"0.5\" stroke=\"black\" stroke-width=\"1\" transform=\"matrix(1,0,0,1,0,0)\" /><rect x=\"384\" y=\"142\" width=\"89\" height=\"0\" fill=\"#0edc32\" fill-opacity=\"0.5\" stroke=\"black\" stroke-width=\"1\" transform=\"matrix(1,0,0,1,0,0)\" /><rect x=\"384\" y=\"122\" width=\"89\" height=\"20\" fill=\"#e60005\" fill-opacity=\"0.5\" stroke=\"black\" stroke-width=\"1\" transform=\"matrix(1,0,0,1,0,0)\" /><rect x=\"483\" y=\"114\" width=\"89\" height=\"179\" fill=\"#104bd6\" fill-opacity=\"0.5\" stroke=\"black\" stroke-width=\"1\" transform=\"matrix(1,0,0,1,0,0)\" /><rect x=\"483\" y=\"114\" width=\"89\" height=\"0\" fill=\"#0edc32\" fill-opacity=\"0.5\" stroke=\"black\" stroke-width=\"1\" transform=\"matrix(1,0,0,1,0,0)\" /><rect x=\"483\" y=\"94\" width=\"89\" height=\"20\" fill=\"#e60005\" fill-opacity=\"0.5\" stroke=\"black\" stroke-width=\"1\" transform=\"matrix(1,0,0,1,0,0)\" /><rect x=\"581\" y=\"77\" width=\"89\" height=\"216\" fill=\"#104bd6\" fill-opacity=\"0.5\" stroke=\"black\" stroke-width=\"1\" transform=\"matrix(1,0,0,1,0,0)\" /><rect x=\"581\" y=\"77\" width=\"89\" height=\"0\" fill=\"#0edc32\" fill-opacity=\"0.5\" stroke=\"black\" stroke-width=\"1\" transform=\"matrix(1,0,0,1,0,0)\" /><rect x=\"581\" y=\"61\" width=\"89\" height=\"16\" fill=\"#e60005\" fill-opacity=\"0.5\" stroke=\"black\" stroke-width=\"1\" transform=\"matrix(1,0,0,1,0,0)\" /><rect x=\"680\" y=\"159\" width=\"89\" height=\"134\" fill=\"#104bd6\" fill-opacity=\"0.5\" stroke=\"black\" stroke-width=\"1\" transform=\"matrix(1,0,0,1,0,0)\" /><rect x=\"680\" y=\"159\" width=\"89\" height=\"0\" fill=\"#0edc32\" fill-opacity=\"0.5\" stroke=\"black\" stroke-width=\"1\" transform=\"matrix(1,0,0,1,0,0)\" /><rect x=\"680\" y=\"139\" width=\"89\" height=\"20\" fill=\"#e60005\" fill-opacity=\"0.5\" stroke=\"black\" stroke-width=\"1\" transform=\"matrix(1,0,0,1,0,0)\" /><rect x=\"779\" y=\"81\" width=\"89\" height=\"212\" fill=\"#104bd6\" fill-opacity=\"0.5\" stroke=\"black\" stroke-width=\"1\" transform=\"matrix(1,0,0,1,0,0)\" /><rect x=\"779\" y=\"81\" width=\"89\" height=\"0\" fill=\"#0edc32\" fill-opacity=\"0.5\" stroke=\"black\" stroke-width=\"1\" transform=\"matrix(1,0,0,1,0,0)\" /><rect x=\"779\" y=\"12\" width=\"89\" height=\"69\" fill=\"#e60005\" fill-opacity=\"0.5\" stroke=\"black\" stroke-width=\"1\" transform=\"matrix(1,0,0,1,0,0)\" /><rect x=\"877\" y=\"146\" width=\"89\" height=\"147\" fill=\"#104bd6\" fill-opacity=\"0.5\" stroke=\"black\" stroke-width=\"1\" transform=\"matrix(1,0,0,1,0,0)\" /><rect x=\"877\" y=\"146\" width=\"89\" height=\"0\" fill=\"#0edc32\" fill-opacity=\"0.5\" stroke=\"black\" stroke-width=\"1\" transform=\"matrix(1,0,0,1,0,0)\" /><rect x=\"877\" y=\"77\" width=\"89\" height=\"69\" fill=\"#e60005\" fill-opacity=\"0.5\" stroke=\"black\" stroke-width=\"1\" transform=\"matrix(1,0,0,1,0,0)\" /><rect x=\"976\" y=\"146\" width=\"89\" height=\"147\" fill=\"#104bd6\" fill-opacity=\"0.5\" stroke=\"black\" stroke-width=\"1\" transform=\"matrix(1,0,0,1,0,0)\" /><rect x=\"976\" y=\"146\" width=\"89\" height=\"0\" fill=\"#0edc32\" fill-opacity=\"0.5\" stroke=\"black\" stroke-width=\"1\" transform=\"matrix(1,0,0,1,0,0)\" /><rect x=\"976\" y=\"77\" width=\"89\" height=\"69\" fill=\"#e60005\" fill-opacity=\"0.5\" stroke=\"black\" stroke-width=\"1\" transform=\"matrix(1,0,0,1,0,0)\" /><rect x=\"1075\" y=\"116\" width=\"89\" height=\"177\" fill=\"#104bd6\" fill-opacity=\"0.5\" stroke=\"black\" stroke-width=\"1\" transform=\"matrix(1,0,0,1,0,0)\" /><rect x=\"1075\" y=\"116\" width=\"89\" height=\"0\" fill=\"#0edc32\" fill-opacity=\"0.5\" stroke=\"black\" stroke-width=\"1\" transform=\"matrix(1,0,0,1,0,0)\" /><rect x=\"1075\" y=\"47\" width=\"89\" height=\"69\" fill=\"#e60005\" fill-opacity=\"0.5\" stroke=\"black\" stroke-width=\"1\" transform=\"matrix(1,0,0,1,0,0)\" /><rect x=\"9.5\" y=\"103.5\" width=\"80\" height=\"95\" fill=\"#FFF\" stroke=\"#000\" stroke-width=\"1\" transform=\"matrix(1,0,0,1,0,0)\" /><rect x=\"0\" y=\"-8.5\" width=\"62\" height=\"20.5\" fill=\"#FFF\" transform=\"matrix(1,0,0,1,15,114)\" /><rect x=\"0\" y=\"-8.5\" width=\"70\" height=\"20.5\" fill=\"#FFF\" transform=\"matrix(1,0,0,1,15,142)\" /><rect x=\"0\" y=\"-8.5\" width=\"69.5\" height=\"20.5\" fill=\"#FFF\" transform=\"matrix(1,0,0,1,15,170)\" /><text x=\"35\" y=\"120\" font-size=\"12\" font-family=\"Helvetica, sans-serif\" fill=\"#000\" transform=\"matrix(1,0,0,1,0,0)\" ><tspan x=\"35\" dy=\"3\">Definite</tspan></text><rect x=\"0\" y=\"0\" width=\"12\" height=\"12\" fill=\"#104bd6\" transform=\"matrix(1,0,0,1,15,114)\" /><text x=\"35\" y=\"148\" font-size=\"12\" font-family=\"Helvetica, sans-serif\" fill=\"#000\" transform=\"matrix(1,0,0,1,0,0)\" ><tspan x=\"35\" dy=\"3\">Probable</tspan></text><rect x=\"0\" y=\"0\" width=\"12\" height=\"12\" fill=\"#0edc32\" transform=\"matrix(1,0,0,1,15,142)\" /><text x=\"35\" y=\"176\" font-size=\"12\" font-family=\"Helvetica, sans-serif\" fill=\"#000\" transform=\"matrix(1,0,0,1,0,0)\" ><tspan x=\"35\" dy=\"3\">Prospect</tspan></text><rect x=\"0\" y=\"0\" width=\"12\" height=\"12\" fill=\"#e60005\" transform=\"matrix(1,0,0,1,15,170)\" /></svg>",
    "LastUpdatedDate": "2013-07-03T05:00:17.837-07:00",
    "PlannedForRelease": "",
    "ReleaseVisibleToPublic": false,
    "Priority": {
      "Name": "Low",
      "Severity": 50,
      "Id": 1
    },
    "ProjectName": "svg",
    "ReportedDate": "2012-04-30T05:46:03.37-07:00",
    "Status": {
      "Name": "Proposed",
      "Id": 1
    },
    "ReasonClosed": {
      "Name": "Unassigned"
    },
    "Summary": "Draw() method returns null reference exception",
    "Type": {
      "Name": "Issue",
      "Id": 3
    },
    "VoteCount": 2,
    "Id": 17961
  },
  "FileAttachments": [],
  "Comments": [
    {
      "Message": "Please remove/close this issue as I've now found that the issue has gone in the newest version of the source, it's does still exist in the Oct 29 2008, Stable 0.5.2 download package",
      "PostedDate": "2012-05-01T00:22:53.957-07:00",
      "Id": -2147483648
    },
    {
      "Message": "",
      "PostedDate": "2013-02-21T16:25:59.46-08:00",
      "Id": -2147483648
    },
    {
      "Message": "",
      "PostedDate": "2013-05-16T01:49:25.093-07:00",
      "Id": -2147483648
    },
    {
      "Message": "Hi,\r\n\r\nI have same problem when i am converting SVG to JPG, Error NullReferenceException throwing.\r\n\r\nSvgDocument svg = SvgDocument.Open(imagePath); //NullReferenceException\nsvg.Draw().Save(imagePath + \".jpg\", ImageFormat.Jpeg);\r\n\r\nPls, suggest how to fix, even i am using SVG 5.2 dll.\r\n\r\nThanks\nVivek",
      "PostedDate": "2013-07-03T05:00:17.837-07:00",
      "Id": -2147483648
    }
  ]
}