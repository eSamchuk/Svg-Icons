[
  {
    "Id": "896105",
    "ThreadId": "390457",
    "Html": "\r\n<p><span lang=\"EN-US\">Hello,</span></p>\r\n<p><span lang=\"EN-US\">I would like to save only what is visible in the viewbox. Is this currently possible?<br>\r\nAparently the save functionally looks at the width and height of the viewbox, but neglects the x and y point.</span></p>\r\n<p>Rgds<br>\r\nPNV&nbsp;</p>\r\n<p>&nbsp;</p>\r\n",
    "PostedDate": "2012-08-06T09:25:09.17-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "1034835",
    "ThreadId": "390457",
    "Html": "Hi, have somebody figured this one out?  I tried modifying the preserveAspectRatio with combinations of xMidYMid, xMinYMin, slice and meet. Also tried creating a renderer and using setClip with the viewbox values but no joy.  Am I going in the right direction?<br />\n<div style=\"color:Black;background-color:White;\"><pre>\r\nSvgDocument document = SvgDocument.Open(Server.MapPath(<span style=\"color:#A31515;\">&quot;~/Content/svg/aaa.svg&quot;</span>));\ndocument.Width = <span style=\"color:Blue;\">new</span> SvgUnit(SvgUnitType.Pixel, 1600);\ndocument.Height = <span style=\"color:Blue;\">new</span> SvgUnit(SvgUnitType.Pixel, 900);\n\n<span style=\"color:Blue;\">using</span> (Bitmap bitmap = <span style=\"color:Blue;\">new</span> Bitmap((<span style=\"color:Blue;\">int</span>)Math.Ceiling(document.Width),(<span style=\"color:Blue;\">int</span>)Math.Ceiling(document.Height))) {\n<span style=\"color:Green;\">//using (Bitmap bitmap = new Bitmap(1600, 900)) {</span>\n    <span style=\"color:Blue;\">using</span> (<span style=\"color:Blue;\">var</span> renderer = SvgRenderer.FromImage(bitmap)) {\n        renderer.TextRenderingHint = TextRenderingHint.AntiAlias;\n        renderer.TextContrast = 1;\n        renderer.PixelOffsetMode = PixelOffsetMode.Half;\n        renderer.SetClip(\n            <span style=\"color:Blue;\">new</span> Region(\n                <span style=\"color:Blue;\">new</span> Rectangle(\n                    (<span style=\"color:Blue;\">int</span>)Math.Ceiling(document.ViewBox.MinX),\n                    (<span style=\"color:Blue;\">int</span>)Math.Ceiling(document.ViewBox.MinY),\n                    (<span style=\"color:Blue;\">int</span>)Math.Ceiling(document.ViewBox.Width),\n                    (<span style=\"color:Blue;\">int</span>)Math.Ceiling(document.ViewBox.Height))));\n      \n        document.Draw(renderer);\n        bitmap.Save(Server.MapPath(<span style=\"color:#A31515;\">&quot;~/Content/img/aaa.png&quot;</span>));\n    }\n}\r\n</pre></div>",
    "PostedDate": "2013-04-23T15:46:53.523-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "1035561",
    "ThreadId": "390457",
    "Html": "Not sure if it's a bug in the library or i'm missing something when trying to draw with a custom renderer but this is how i solved it. I'll leave it here in case somebody else runs into the same problem.\r<br />\nI changed the PushTransforms method in SvgFragment.cs to adjust to the viewbox like this.<br />\n<div style=\"color:Black;background-color:White;\"><pre>\r\n<span style=\"color:Blue;\">protected</span> <span style=\"color:Blue;\">internal</span> <span style=\"color:Blue;\">override</span> <span style=\"color:Blue;\">void</span> PushTransforms(SvgRenderer renderer)\n{\n    <span style=\"color:Blue;\">base</span>.PushTransforms(renderer);\n\n    <span style=\"color:Blue;\">if</span> (!<span style=\"color:Blue;\">this</span>.ViewBox.Equals(SvgViewBox.Empty))\n    {\n        <span style=\"color:Blue;\">if</span> (<span style=\"color:Blue;\">this</span>.ViewBox.MinX != 0 || <span style=\"color:Blue;\">this</span>.ViewBox.MinY != 0)\n        {\n            renderer.TranslateTransform(-<span style=\"color:Blue;\">this</span>.ViewBox.MinX, -<span style=\"color:Blue;\">this</span>.ViewBox.MinY, MatrixOrder.Append);\n        }\n\n        renderer.ScaleTransform(<span style=\"color:Blue;\">this</span>.Width.ToDeviceValue() / <span style=\"color:Blue;\">this</span>.ViewBox.Width, <span style=\"color:Blue;\">this</span>.Height.ToDeviceValue() / <span style=\"color:Blue;\">this</span>.ViewBox.Height, MatrixOrder.Append);\n    }\n}\r\n</pre></div>Then to convert from svg to png (no custom renderer):<br />\n<div style=\"color:Black;background-color:White;\"><pre>\r\nSvgDocument document = SvgDocument.Open(Server.MapPath(<span style=\"color:#A31515;\">&quot;~/Content/svg/aaa.svg&quot;</span>));\ndocument.Width = <span style=\"color:Blue;\">new</span> SvgUnit(SvgUnitType.Pixel, 1600);\ndocument.Height = <span style=\"color:Blue;\">new</span> SvgUnit(SvgUnitType.Pixel, 900);\n\n<span style=\"color:Blue;\">using</span> (Bitmap bitmap = document.Draw())\n{\n    bitmap.Save(Server.MapPath(<span style=\"color:#A31515;\">&quot;~/Content/img/aaa.png&quot;</span>));\n}\r\n</pre></div>This are the properties of the svg object<br />\n<div style=\"color:Black;background-color:White;\"><pre>\r\n<span style=\"color:Blue;\">&lt;</span><span style=\"color:#A31515;\">svg</span> <span style=\"color:Red;\">style</span><span style=\"color:Blue;\">=</span><span style=\"color:Black;\">&quot;</span><span style=\"color:Blue;\">overflow: hidden; position: relative;</span><span style=\"color:Black;\">&quot;</span> <span style=\"color:Red;\">height</span><span style=\"color:Blue;\">=</span><span style=\"color:Black;\">&quot;</span><span style=\"color:Blue;\">100%</span><span style=\"color:Black;\">&quot;</span> <span style=\"color:Red;\">version</span><span style=\"color:Blue;\">=</span><span style=\"color:Black;\">&quot;</span><span style=\"color:Blue;\">1.1</span><span style=\"color:Black;\">&quot;</span> <span style=\"color:Red;\">width</span><span style=\"color:Blue;\">=</span><span style=\"color:Black;\">&quot;</span><span style=\"color:Blue;\">100%</span><span style=\"color:Black;\">&quot;</span> <span style=\"color:Red;\">xmlns</span><span style=\"color:Blue;\">=</span><span style=\"color:Black;\">&quot;</span><span style=\"color:Blue;\">http://www.w3.org/2000/svg</span><span style=\"color:Black;\">&quot;</span> <span style=\"color:Red;\">viewBox</span><span style=\"color:Blue;\">=</span><span style=\"color:Black;\">&quot;</span><span style=\"color:Blue;\">148 83 314 176</span><span style=\"color:Black;\">&quot;</span> <span style=\"color:Red;\">preserveAspectRatio</span><span style=\"color:Blue;\">=</span><span style=\"color:Black;\">&quot;</span><span style=\"color:Blue;\">xMidYMid slice</span><span style=\"color:Black;\">&quot;</span><span style=\"color:Blue;\">&gt;</span>\r\n</pre></div>",
    "PostedDate": "2013-04-25T04:03:04.837-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]